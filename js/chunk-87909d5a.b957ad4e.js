(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87909d5a"],{"1a92":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"userInfo"},[r("h1",[e._v(" "+e._s(e.$t("請填入班級代號"))+" ")]),r("v-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-container",{staticClass:"container"},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.rules,label:e.$t("班級代號（請注意英文大小寫）"),required:""},model:{value:e.memberGroupCode,callback:function(t){e.memberGroupCode=t},expression:"memberGroupCode"}})],1)],1),r("v-btn",{staticClass:"mt-5",attrs:{type:"submit",disabled:!e.valid}},[e._v(" "+e._s(e.$t("送出"))+" ")])],1)],1)],1)},a=[],u=r("1da1"),o=(r("96cf"),r("ac1f"),r("5319"),r("b0c0"),r("99af"),r("d3b7"),r("25f0"),r("fd32")),s=r.n(o),i=r("d4ec"),c=r("bee2"),d=r("0613"),m=r("6ad1"),l=function(){function e(){Object(i["a"])(this,e)}return Object(c["a"])(e,null,[{key:"nameToUuid",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={uniqueName:t},e.next=3,m["a"].post("workspace/member-groups/name-to-id/",r);case 3:return n=e.sent,e.abrupt("return",n.data.uuid);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addMember",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!d["a"].state.userId){e.next=6;break}return r={userId:d["a"].state.userId},e.next=4,m["a"].post("workspace/member-groups/".concat(t,"/members/"),r);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:return e.abrupt("return",Promise.reject(new Error("userId not found, failed to update profile")));case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),p=r("2b0e"),f=r("88c3"),b=p["default"].extend({components:{},data:function(){return{valid:!1,memberGroupCode:"",rules:[function(e){return!!e||f["a"].t("必填")}]}},watch:{memberGroupCode:function(){this.memberGroupCode=this.memberGroupCode.replace(/[\uff01-\uff5e]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))}},mounted:function(){this.$route.query.name&&this.$route.query.uniqueNum?this.memberGroupCode="".concat(String(this.$route.query.name),"#").concat(String(this.$route.query.uniqueNum)):this.memberGroupCode=""},methods:{submit:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.nameToUuid(e.memberGroupCode);case 3:return r=t.sent,t.next=6,l.addMember(r);case 6:s.a.isInClient()&&e.$route.query.sendMsg&&(s.a.sendMessages([{type:"text",text:"填寫完成！"}]),s.a.closeWindow()),e.$store.commit("updateMemberGroupCode",e.memberGroupCode),e.$router.push("/SuccessPage"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.handleError(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},handleError:function(e){if(!e.response||404!==e.response.status)throw this.$notify({type:"error",title:this.$t("加入失敗").toString(),text:this.$t("未知的原因造成失敗，請稍後重試，若持續失敗，麻煩請聯絡客服人員").toString()}),e;this.$notify({type:"error",title:this.$t("加入失敗").toString(),text:this.$t("您所輸入的班級不存在，請檢查是否輸入正確").toString()})}}}),h=b,v=(r("35f5"),r("2877")),w=r("6544"),C=r.n(w),g=r("8336"),x=r("62ad"),$=r("a523"),y=r("4bd4"),k=r("0fd9"),G=r("8654"),q=Object(v["a"])(h,n,a,!1,null,"10dea35e",null);t["default"]=q.exports;C()(q,{VBtn:g["a"],VCol:x["a"],VContainer:$["a"],VForm:y["a"],VRow:k["a"],VTextField:G["a"]})},"35f5":function(e,t,r){"use strict";r("4be5")},"4be5":function(e,t,r){}}]);
//# sourceMappingURL=chunk-87909d5a.b957ad4e.js.map